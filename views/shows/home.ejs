<% layout("layouts/boilerplate") %>
<div>
  <h1 style="display: inline-block; margin-right: 10px">Managing Shows</h1>
  <form action="/home" style="display: inline-block">
    <button class="btn btn-outline-dark btn-sm">Home</button>
  </form>
</div>
<!-- MOVIE SELECTION -->
<div class="container d-flex flex-row">
  <div class="container m-2 w-100">
    <h3>Step 1: Select the Movie</h3>
    <table class="table">
      <thead>
        <tr>
          <th>Name</th>
          <th>Year</th>
          <th>Sinposis</th>
          <th>Rating</th>
          <th>Language</th>
          <th>Duration</th>
          <th>Select</th>
        </tr>
      </thead>
      <tbody>
        <% for(movie of movies){ %>
        <tr>
          <td><%= movie.title %></td>
          <td><%= movie.year %></td>
          <td><%= movie.sinopsis %></td>
          <td><%= movie.rating %></td>
          <td><%= movie.language %></td>
          <td><%= movie.duration %></td>
          <td>
            <button onclick="addMovie('<%= movie.title %>')">Select</button>
          </td>
        </tr>
        <% } %>
      </tbody>
    </table>
    <!-- AUDITORIUM SELECTION -->
    <h3>Step 2: Select the auditorium</h3>
    <table class="table">
      <thead>
        <tr>
          <th>Number</th>
          <th>Capacity</th>
          <th>Proyection Type</th>
          <th>Select</th>
        </tr>
      </thead>
      <tbody>
        <% for(auditorium of auditoriums){ %>
        <tr>
          <td><%= auditorium.number %></td>
          <td><%= auditorium.capacity %></td>
          <td><%= auditorium.proyectionType %></td>
          <td>
            <button
              onclick="addAuditorium('<%= auditorium.number %>', '<%= auditorium.capacity %>')"
            >
              Select
            </button>
          </td>
        </tr>
        <% } %>
      </tbody>
    </table>
    <!-- DAY SELECTION -->
    <h3>Step 3: Select the day</h3>
    <input type="date" name="day" id="day" />
    <button onclick="addDate()">Confirm</button>
    <!-- SHOWTIMES SELECTION -->
    <h3>Step 4: Add Showtime</h3>
    <div>
      <input type="text" id="showtime" />
      <button onclick="addShowtime()">Add</button>
    </div>
  </div>
  <div class="container m-2 w-100">
    <!-- SHOW OVERVIEW -->
    <h1>Show Overview</h1>
    <table class="table">
      <thead>
        <tr>
          <td>Movie</td>
          <td>Auditorium</td>
          <td>Day</td>
          <td>Showtime</td>
          <td>Available Seats</td>
        </tr>
      </thead>
      <tbody>
        <td id="body_movie"></td>
        <td id="body_auditorium"></td>
        <td id="body_day"></td>
        <td id="body_showtime"></td>
        <td id="body_seats"></td>
      </tbody>
    </table>
    <form id="create_form" action="/shows" method="post">
      <button onclick="createShow()">Create Show</button>
    </form>
    <!-- ALL SHOWS -->
    <h1>Showing all Shows</h1>
    <table class="table">
      <thead>
        <tr>
          <td>ID</td>
          <td>Movie</td>
          <td>Auditorium</td>
          <td>Day</td>
          <td>Showtime</td>
          <td>Available Seats</td>
        </tr>
      </thead>
      <tbody>
        <% for(show of shows){ %> <% const objectParse =
        JSON.parse(JSON.stringify(show)) %> <% const ID = objectParse.showId%>
        <tr>
          <td><%= ID %></td>
          <td><%= show.movie %></td>
          <td><%= show.auditorium %></td>
          <td><%= show.day %></td>
          <td><%= show.showtime %></td>
          <td><%= show.availableSeats %></td>
        </tr>
        <%}%>
      </tbody>
    </table>
  </div>
</div>
<script src="/scripts/shows.js"></script>
